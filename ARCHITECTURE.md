# SURAKSHA CHAIN - System Architecture

## ðŸ“ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SURAKSHA CHAIN SYSTEM                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FRONTEND LAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Depot Manager   â”‚  â”‚  Mechanic App    â”‚  â”‚  Analytics      â”‚ â”‚
â”‚  â”‚   Dashboard      â”‚  â”‚  (Tablet)        â”‚  â”‚  Portal         â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  - Fleet View    â”‚  â”‚  - QR Scanning   â”‚  â”‚  - KPI Charts   â”‚ â”‚
â”‚  â”‚  - Bus Passport  â”‚  â”‚  - Checklist     â”‚  â”‚  - Ledger       â”‚ â”‚
â”‚  â”‚  - Alerts        â”‚  â”‚  - Part Tracking â”‚  â”‚  - Audit Trail  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                     â”‚                      â”‚          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                 â”‚                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                    â”‚  Blockchain Service       â”‚                 â”‚
â”‚                    â”‚  (blockchain.js)          â”‚                 â”‚
â”‚                    â”‚  - Web3 Connection        â”‚                 â”‚
â”‚                    â”‚  - Contract Calls         â”‚                 â”‚
â”‚                    â”‚  - Event Listeners        â”‚                 â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ Ethers.js
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BLOCKCHAIN LAYER                             â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚          Ethereum Network (Hardhat Local Node)               â”‚ â”‚
â”‚  â”‚                    http://localhost:8545                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              KSRTCFleet Smart Contract                       â”‚ â”‚
â”‚  â”‚                    (ERC-721 NFT)                             â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  Functions:                        State:                    â”‚ â”‚
â”‚  â”‚  â€¢ mintBusPassport()               â€¢ busPassports mapping    â”‚ â”‚
â”‚  â”‚  â€¢ commissionBus()                 â€¢ tokenIdCounter          â”‚ â”‚
â”‚  â”‚  â€¢ addMaintenanceRecord()          â€¢ registrationToTokenId   â”‚ â”‚
â”‚  â”‚  â€¢ addFuelRecord()                                           â”‚ â”‚
â”‚  â”‚  â€¢ addAccidentRecord()             Events:                   â”‚ â”‚
â”‚  â”‚  â€¢ getBusDetails()                 â€¢ BusMinted               â”‚ â”‚
â”‚  â”‚                                    â€¢ BusCommissioned         â”‚ â”‚
â”‚  â”‚  Data Structures:                  â€¢ MaintenanceRecorded     â”‚ â”‚
â”‚  â”‚  â€¢ MaintenanceRecord               â€¢ FuelRecorded            â”‚ â”‚
â”‚  â”‚  â€¢ AccidentRecord                  â€¢ AccidentRecorded        â”‚ â”‚
â”‚  â”‚  â€¢ FuelRecord                                                â”‚ â”‚
â”‚  â”‚  â€¢ BusPassport                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ Data Flow Diagrams

### 1. Maintenance Workflow

```
Mechanic                Frontend              Blockchain Service      Smart Contract
   â”‚                       â”‚                         â”‚                      â”‚
   â”‚  Login (ID: 1234)     â”‚                         â”‚                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚                      â”‚
   â”‚                       â”‚                         â”‚                      â”‚
   â”‚  Scan Bus QR          â”‚                         â”‚                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ connect()               â”‚                      â”‚
   â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
   â”‚                       â”‚                         â”‚ getBusDetails(1)     â”‚
   â”‚                       â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                       â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  BusPassport Data    â”‚
   â”‚                       â”‚                         â”‚                      â”‚
   â”‚ Complete Task 1 âœ“     â”‚                         â”‚                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ (UI Update)             â”‚                      â”‚
   â”‚                       â”‚                         â”‚                      â”‚
   â”‚ Scan Part QR          â”‚                         â”‚                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ (Validate Part)         â”‚                      â”‚
   â”‚                       â”‚                         â”‚                      â”‚
   â”‚ Complete All Tasks    â”‚                         â”‚                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚                      â”‚
   â”‚                       â”‚ addMaintenanceRecord()  â”‚                      â”‚
   â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Transaction to       â”‚
   â”‚                       â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                       â”‚                         â”‚  Blockchain          â”‚
   â”‚                       â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  TX Receipt          â”‚
   â”‚  âœ… Success!           â”‚                         â”‚                      â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚                      â”‚
   â”‚  (Immutable Record)   â”‚                         â”‚                      â”‚
```

### 2. Bus Passport View Workflow

```
Depot Manager          Frontend              Blockchain Service      Smart Contract
   â”‚                      â”‚                         â”‚                      â”‚
   â”‚ Click Bus ID         â”‚                         â”‚                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚                      â”‚
   â”‚                      â”‚ getBusDetails(tokenId)  â”‚                      â”‚
   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
   â”‚                      â”‚                         â”‚ Query Contract       â”‚
   â”‚                      â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                      â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                      â”‚                         â”‚ Full BusPassport     â”‚
   â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ with all arrays      â”‚
   â”‚                      â”‚                         â”‚                      â”‚
   â”‚ Display Passport     â”‚                         â”‚                      â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚                      â”‚
   â”‚  â€¢ Basic Info        â”‚                         â”‚                      â”‚
   â”‚  â€¢ Maintenance [5]   â”‚                         â”‚                      â”‚
   â”‚  â€¢ Fuel Records [12] â”‚                         â”‚                      â”‚
   â”‚  â€¢ Accidents [0]     â”‚                         â”‚                      â”‚
   â”‚                      â”‚                         â”‚                      â”‚
   â”‚ Click Blockchain     â”‚                         â”‚                      â”‚
   â”‚ Proof Link           â”‚                         â”‚                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ getTransactionDetails() â”‚                      â”‚
   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
   â”‚                      â”‚                         â”‚ Query TX Hash        â”‚
   â”‚                      â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                      â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  Show TX Hash        â”‚                         â”‚  TX Details          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
   â”‚  & Block Explorer    â”‚                         â”‚                      â”‚
```

### 3. Analytics Dashboard Workflow

```
Executive              Frontend              Blockchain Service      Smart Contract
   â”‚                      â”‚                         â”‚                      â”‚
   â”‚ Open Analytics       â”‚                         â”‚                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚                      â”‚
   â”‚                      â”‚ connect()               â”‚                      â”‚
   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
   â”‚                      â”‚                         â”‚                      â”‚
   â”‚                      â”‚ getAllBuses()           â”‚                      â”‚
   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
   â”‚                      â”‚                         â”‚ Loop: getBusDetails()â”‚
   â”‚                      â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                      â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                      â”‚                         â”‚ All bus data         â”‚
   â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
   â”‚                      â”‚                         â”‚                      â”‚
   â”‚ View Charts          â”‚ (Process & Aggregate    â”‚                      â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  data locally)          â”‚                      â”‚
   â”‚  â€¢ Fuel Efficiency   â”‚                         â”‚                      â”‚
   â”‚  â€¢ Maintenance Cost  â”‚                         â”‚                      â”‚
   â”‚  â€¢ Fleet Composition â”‚                         â”‚                      â”‚
   â”‚                      â”‚                         â”‚                      â”‚
   â”‚ Click "Ledger        â”‚                         â”‚                      â”‚
   â”‚  Explorer"           â”‚                         â”‚                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚                      â”‚
   â”‚                      â”‚ Generate TX Log         â”‚                      â”‚
   â”‚                      â”‚ (from bus events)       â”‚                      â”‚
   â”‚  Transaction Feed    â”‚                         â”‚                      â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚                      â”‚
   â”‚  [150 Transactions]  â”‚                         â”‚                      â”‚
```

---

## ðŸ—‚ï¸ Data Model

### On-Chain (Blockchain)

```
BusPassport {
  string registrationNumber
  string chassisNumber
  string model
  bool isCommissioned
  uint256 commissioningDate
  uint256 initialOdometer
  MaintenanceRecord[] maintenanceHistory
  AccidentRecord[] accidentHistory
  FuelRecord[] fuelHistory
}

MaintenanceRecord {
  uint256 timestamp
  string serviceType
  string workshopId
  string mechanicId
  string supervisorId
  string[] sparePartsUsed
  uint256 odometerReading
}

AccidentRecord {
  uint256 timestamp
  string reportId
  string location
  string description
  bytes32 reportHash (IPFS)
}

FuelRecord {
  uint256 timestamp
  string depotId
  uint256 litersDispensed (Ã—100)
  uint256 odometerReading
}
```

### Off-Chain (Frontend State)

```javascript
// Enriched Bus Object
{
  tokenId: number,
  registrationNumber: string,
  chassisNumber: string,
  model: string,
  isCommissioned: boolean,
  commissioningDate: timestamp,
  initialOdometer: number,
  maintenanceHistory: MaintenanceRecord[],
  accidentHistory: AccidentRecord[],
  fuelHistory: FuelRecord[],
  // Computed fields
  maintenanceCount: number,
  accidentCount: number,
  fuelCount: number,
  currentOdometer: number,
  status: 'On Route' | 'In Workshop' | 'Awaiting Service'
}
```

---

## ðŸ” Security Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Access Control Layers                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Smart Contract (Ownable)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 â”œâ”€ Owner Only Functions:
 â”‚   â”œâ”€ mintBusPassport()
 â”‚   â”œâ”€ commissionBus()
 â”‚   â”œâ”€ addMaintenanceRecord()
 â”‚   â”œâ”€ addFuelRecord()
 â”‚   â””â”€ addAccidentRecord()
 â”‚
 â””â”€ Public Read Functions:
     â”œâ”€ getBusDetails()
     â”œâ”€ getTokenIdByRegistration()
     â””â”€ getTotalBuses()

Layer 2: Blockchain Immutability
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 â”œâ”€ All records are permanent
 â”œâ”€ Cannot be deleted
 â”œâ”€ Cannot be modified
 â””â”€ Timestamped automatically

Layer 3: IPFS Document Storage
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 â”œâ”€ Accident photos/reports stored off-chain
 â”œâ”€ Hash stored on-chain
 â””â”€ Verifiable integrity

Layer 4: Frontend Authentication
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 â”œâ”€ Mechanic: Employee ID login
 â”œâ”€ Manager: (Future: SSO/OAuth)
 â””â”€ Executive: (Future: Multi-sig)
```

---

## ðŸŒ Deployment Architecture

### Development (Current)
```
Local Machine
â”œâ”€â”€ Hardhat Node (Port 8545)
â”‚   â””â”€â”€ KSRTCFleet Contract
â”‚
â””â”€â”€ Vite Dev Server (Port 3000)
    â”œâ”€â”€ Depot Manager UI
    â”œâ”€â”€ Mechanic App UI
    â””â”€â”€ Analytics Portal UI
```

### Production (Future)
```
Cloud Infrastructure
â”œâ”€â”€ Ethereum Mainnet / Polygon
â”‚   â””â”€â”€ KSRTCFleet Contract (Deployed)
â”‚
â”œâ”€â”€ Web Hosting (Vercel/Netlify)
â”‚   â”œâ”€â”€ Static React App
â”‚   â””â”€â”€ CDN Distribution
â”‚
â””â”€â”€ IPFS Network
    â””â”€â”€ Document Storage
```

---

## ðŸ“Š Technology Stack Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FRONTEND STACK                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  React 18                                            â”‚
â”‚  â”œâ”€â”€ React Router (Navigation)                      â”‚
â”‚  â”œâ”€â”€ Recharts (Data Visualization)                  â”‚
â”‚  â””â”€â”€ Lucide React (Icons)                           â”‚
â”‚                                                      â”‚
â”‚  Vite (Build Tool)                                  â”‚
â”‚  â”œâ”€â”€ Fast HMR                                        â”‚
â”‚  â”œâ”€â”€ ESBuild                                         â”‚
â”‚  â””â”€â”€ Optimized Bundles                              â”‚
â”‚                                                      â”‚
â”‚  Ethers.js 6.x (Web3 Library)                       â”‚
â”‚  â””â”€â”€ Contract Interaction                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 BLOCKCHAIN STACK                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Solidity 0.8.20                                    â”‚
â”‚  â””â”€â”€ Smart Contract Language                        â”‚
â”‚                                                      â”‚
â”‚  Hardhat                                            â”‚
â”‚  â”œâ”€â”€ Development Environment                        â”‚
â”‚  â”œâ”€â”€ Testing Framework                              â”‚
â”‚  â”œâ”€â”€ Local Node                                     â”‚
â”‚  â””â”€â”€ Deployment Scripts                             â”‚
â”‚                                                      â”‚
â”‚  OpenZeppelin Contracts                             â”‚
â”‚  â”œâ”€â”€ ERC721.sol (NFT Standard)                      â”‚
â”‚  â””â”€â”€ Ownable.sol (Access Control)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FUTURE ADDITIONS                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  IPFS (Document Storage)                            â”‚
â”‚  React Native (Mobile Apps)                         â”‚
â”‚  GraphQL (Indexed Queries)                          â”‚
â”‚  WebSocket (Real-time Updates)                      â”‚
â”‚  Multi-signature Wallets                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture provides:
âœ… **Scalability** - Can handle 1000+ buses  
âœ… **Security** - Immutable, owner-only writes  
âœ… **Transparency** - Full audit trail  
âœ… **Usability** - Role-specific interfaces  
âœ… **Verifiability** - Independent record checking
